

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lingvo.tasks.asr.model module &mdash; Lingvo  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lingvo.tasks.asr.model_test_input_generator module" href="lingvo.tasks.asr.model_test_input_generator.html" />
    <link rel="prev" title="lingvo.tasks.asr.input_generator module" href="lingvo.tasks.asr.input_generator.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Lingvo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="lingvo.html">lingvo package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="lingvo.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lingvo.core.html">lingvo.core package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lingvo.tasks.html">lingvo.tasks package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="lingvo.tasks.html#subpackages">Subpackages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.tools.html">lingvo.tools package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lingvo.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lingvo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="lingvo.html">lingvo package</a> &raquo;</li>
        
          <li><a href="lingvo.tasks.html">lingvo.tasks package</a> &raquo;</li>
        
          <li><a href="lingvo.tasks.asr.html">lingvo.tasks.asr package</a> &raquo;</li>
        
      <li>lingvo.tasks.asr.model module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/lingvo.tasks.asr.model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-lingvo.tasks.asr.model">
<span id="lingvo-tasks-asr-model-module"></span><h1>lingvo.tasks.asr.model module<a class="headerlink" href="#module-lingvo.tasks.asr.model" title="Permalink to this headline">¶</a></h1>
<p>Speech model.</p>
<dl class="attribute">
<dt id="lingvo.tasks.asr.model.DecoderTopK">
<code class="descclassname">lingvo.tasks.asr.model.</code><code class="descname">DecoderTopK</code><a class="headerlink" href="#lingvo.tasks.asr.model.DecoderTopK" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">lingvo.tasks.asr.model.topk</span></code></p>
</dd></dl>

<dl class="class">
<dt id="lingvo.tasks.asr.model.AsrModel">
<em class="property">class </em><code class="descclassname">lingvo.tasks.asr.model.</code><code class="descname">AsrModel</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="lingvo.core.base_model.html#lingvo.core.base_model.BaseTask" title="lingvo.core.base_model.BaseTask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lingvo.core.base_model.BaseTask</span></code></a></p>
<p>Speech model.</p>
<dl class="classmethod">
<dt id="lingvo.tasks.asr.model.AsrModel.Params">
<em class="property">classmethod </em><code class="descname">Params</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.Params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.Params" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the layer params.</p>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._GetDecoderTargets">
<code class="descname">_GetDecoderTargets</code><span class="sig-paren">(</span><em>input_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._GetDecoderTargets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._GetDecoderTargets" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns targets which will be forwarded to the decoder.</p>
<blockquote>
<div>Subclasses can override this method to change the target that is used by
the decoder. For example, a subclass could add additional targets that
can be forwared to the decoder.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>input_batch</strong> – a NestedMap which contains the targets.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a NestedMap corresponding to the target selected.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._MakeDecoderTheta">
<code class="descname">_MakeDecoderTheta</code><span class="sig-paren">(</span><em>theta</em>, <em>input_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._MakeDecoderTheta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._MakeDecoderTheta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute theta to be used by the decoder for computing metrics and loss.</p>
<p>This method can be over-ridden by child classes to add values to theta that
is passed to the decoder.</p>
<p>For example, to pass the one hot vector which indicates which data source
was selected a child class could over-ride this method as follows:</p>
<dl class="docutils">
<dt>def _MakeDecoderTheta(self, theta):</dt>
<dd>decoder_theta = super(MyModel, self)._MakeDecoderTheta(theta, input_batch)
decoder_theta.child_onehot = input_batch.source_selected
return decoder_theta</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theta</strong> – A <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.NestedMap" title="lingvo.core.py_utils.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> object containing variable values used to compute
loss and metrics.</li>
<li><strong>input_batch</strong> – NestedMap containing input data in the current batch. Unused</li>
<li><strong>here.</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A copy of the decoder theta.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">theta</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.ComputePredictions">
<code class="descname">ComputePredictions</code><span class="sig-paren">(</span><em>theta</em>, <em>input_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.ComputePredictions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.ComputePredictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes predictions for <code class="xref py py-obj docutils literal notranslate"><span class="pre">input_batch</span></code>.</p>
<p>The output can be in the form of probablistic distributions, e.g., softmax
logits for discrete outputs, mixture of logistics for continuous values, or
regression values.</p>
<p>For training/evaluation, the output will be used for computing loss and
gradient updates, including comparing predicted distributions between
teacher and student for distillation. During inference the output can be
used to compute final outputs, perhaps with sampling.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theta</strong> – A <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.NestedMap" title="lingvo.core.py_utils.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> object containing variable values of this task.</li>
<li><strong>input_batch</strong> – A <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.NestedMap" title="lingvo.core.py_utils.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> object containing input tensors to this tower.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Predictions, either a single Tensor, a <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.NestedMap" title="lingvo.core.py_utils.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a>, or a namedtuple.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.ComputeLoss">
<code class="descname">ComputeLoss</code><span class="sig-paren">(</span><em>theta</em>, <em>input_batch</em>, <em>predictions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.ComputeLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.ComputeLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes loss and other metrics for the given predictions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theta</strong> – A <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.NestedMap" title="lingvo.core.py_utils.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> object containing variable values of this task.</li>
<li><strong>input_batch</strong> – A <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.NestedMap" title="lingvo.core.py_utils.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> object containing input tensors to this tower.</li>
<li><strong>predictions</strong> – The output of <a class="reference internal" href="#lingvo.tasks.asr.model.AsrModel.ComputePredictions" title="lingvo.tasks.asr.model.AsrModel.ComputePredictions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ComputePredictions</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A dict containing str keys and (metric, weight) pairs as values, where
one of the keys is expected to be ‘loss’.
A dict containing arbitrary tensors describing something about each
training example, where the first dimension of each tensor is the batch
index.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Two dicts</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._FrontendAndEncoderFProp">
<code class="descname">_FrontendAndEncoderFProp</code><span class="sig-paren">(</span><em>theta</em>, <em>input_batch_src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._FrontendAndEncoderFProp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._FrontendAndEncoderFProp" title="Permalink to this definition">¶</a></dt>
<dd><p>FProps through the frontend and encoder.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theta</strong> – A NestedMap object containing weights’ values of this layer and its
children layers.</li>
<li><strong>input_batch_src</strong> – An input NestedMap as per <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseAsrFrontend.FProp</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A NestedMap as from <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsrEncoder.FProp</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._GetTopK">
<code class="descname">_GetTopK</code><span class="sig-paren">(</span><em>decoder_outs</em>, <em>tag=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._GetTopK"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._GetTopK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._ComputeNormalizedWER">
<code class="descname">_ComputeNormalizedWER</code><span class="sig-paren">(</span><em>hyps</em>, <em>refs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._ComputeNormalizedWER"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._ComputeNormalizedWER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.AddAdditionalDecoderMetricsToGraph">
<code class="descname">AddAdditionalDecoderMetricsToGraph</code><span class="sig-paren">(</span><em>topk_hyps</em>, <em>filtered_hyps</em>, <em>filtered_refs</em>, <em>input_batch</em>, <em>decoder_outs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.AddAdditionalDecoderMetricsToGraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.AddAdditionalDecoderMetricsToGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict of metrics which should be computed from decoded hyps.</p>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.DecodeWithTheta">
<code class="descname">DecodeWithTheta</code><span class="sig-paren">(</span><em>theta</em>, <em>input_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.DecodeWithTheta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.DecodeWithTheta" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs the inference graph.</p>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._GetTargetForDecoderMetrics">
<code class="descname">_GetTargetForDecoderMetrics</code><span class="sig-paren">(</span><em>input_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._GetTargetForDecoderMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._GetTargetForDecoderMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns targets which will be used to compute decoder metrics.</p>
<blockquote>
<div>Subclasses can override this method to change the target that is used when
calculating decoder metrics.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>input_batch</strong> – a NestedMap which contains the targets.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a NestedMap containing ‘ids’, ‘labels’, ‘paddings’, ‘weights’</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._ComputeDecoderMetrics">
<code class="descname">_ComputeDecoderMetrics</code><span class="sig-paren">(</span><em>decoder_outs</em>, <em>input_batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._ComputeDecoderMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._ComputeDecoderMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes metrics on output from decoder.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>decoder_outs</strong> – A <code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamSearchDecodeOutput</span></code>, a namedtuple containing the
decode results.</li>
<li><strong>input_batch</strong> – A <code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code> of tensors representing the source, target,
and other components of the input batch.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dict of Tensors containing decoder output and metrics.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.CreateAdditionalDecoderMetrics">
<code class="descname">CreateAdditionalDecoderMetrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.CreateAdditionalDecoderMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.CreateAdditionalDecoderMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of additional metrics which should be computed.</p>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.CreateDecoderMetrics">
<code class="descname">CreateDecoderMetrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.CreateDecoderMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.CreateDecoderMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dict of decoder metrics for <a class="reference internal" href="#lingvo.tasks.asr.model.AsrModel.PostProcessDecodeOut" title="lingvo.tasks.asr.model.AsrModel.PostProcessDecodeOut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PostProcessDecodeOut</span></code></a> to update.</p>
<p>Returns a dict mapping from string keys to <a class="reference internal" href="lingvo.core.metrics.html#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseMetric</span></code></a> objects.</p>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.UpdateAdditionalMetrics">
<code class="descname">UpdateAdditionalMetrics</code><span class="sig-paren">(</span><em>dec_out_dict</em>, <em>dec_metrics_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.UpdateAdditionalMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.UpdateAdditionalMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates and returns a dictionary of metrics based on decoded hyps.</p>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.PostProcessDecodeOut">
<code class="descname">PostProcessDecodeOut</code><span class="sig-paren">(</span><em>dec_out_dict</em>, <em>dec_metrics_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.PostProcessDecodeOut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.PostProcessDecodeOut" title="Permalink to this definition">¶</a></dt>
<dd><p>Post-processes decoder out and updates contents of <code class="xref py py-obj docutils literal notranslate"><span class="pre">decode_metrics_dict</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>decode_out_dict</strong> – A dictionary of Tensors fetched.</li>
<li><strong>decode_metrics_dict</strong> – A dict mapping from string key to <a class="reference internal" href="lingvo.core.metrics.html#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseMetric</span></code></a>
object as created by <a class="reference internal" href="#lingvo.tasks.asr.model.AsrModel.CreateDecoderMetrics" title="lingvo.tasks.asr.model.AsrModel.CreateDecoderMetrics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CreateDecoderMetrics</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">output_key_value_pairs - a list of (key, value) pairs that can be saved
(i.e. of type str, bytes, or unicode).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel.Inference">
<code class="descname">Inference</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel.Inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel.Inference" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs inference subgraphs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(fetches, feeds)}. Each of
fetches and feeds is itself a dictionary which maps a string name (which
describes the tensor) to a corresponding tensor in the inference graph
which should be fed/fetched from.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">A dictionary of the form {‘subgraph_name’</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lingvo.tasks.asr.model.AsrModel._InferenceSubgraph_Default">
<code class="descname">_InferenceSubgraph_Default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tasks/asr/model.html#AsrModel._InferenceSubgraph_Default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tasks.asr.model.AsrModel._InferenceSubgraph_Default" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs graph for offline inference.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(fetches, feeds) where both fetches and feeds are dictionaries. Each
dictionary consists of keys corresponding to tensor names, and values
corresponding to a tensor in the graph which should be input/read from.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lingvo.tasks.asr.model_test_input_generator.html" class="btn btn-neutral float-right" title="lingvo.tasks.asr.model_test_input_generator module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lingvo.tasks.asr.input_generator.html" class="btn btn-neutral float-left" title="lingvo.tasks.asr.input_generator module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>